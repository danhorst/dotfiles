PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/var/lib/gems/1.8/bin:$JAVA_HOME:$FEDORA_HOME/server/bin:$FEDORA_HOME/client/bin:/opt/oracle/instantclient:$HOME/bin"
export PATH

export SCRIPT_HOME='/home/dbrubak1/.config/repository/script'
export XDG_DATA_HOME='/home/dbrubak1/.local/share'

export GREP_OPTIONS='--color=auto'
export GREP_COLOR='7;31'

export LD_LIBRARY_PATH='/opt/oracle/instantclient'
export SQLPATH='/opt/oracle/instantclient'
export TNS_ADMIN='/opt/oracle/instantclient'

export EDITOR='/usr/bin/vim'

alias ll='ls -l'
alias la='ls -la'

alias start='$SCRIPT_HOME/start.sh'

alias fstart='$FEDORA_HOME/tomcat/bin/startup.sh'
alias fstop='$FEDORA_HOME/tomcat/bin/shutdown.sh'

alias apache_start='sudo /usr/sbin/apache2ctl start'
alias apache_restart='sudo /usr/sbin/apache2ctl graceful'
alias apache_stop='sudo /usr/sbin/apache2ctl stop'
alias apache_configtest='sudo /usr/sbin/apache2ctl configtest'
alias apr='apache_restart'

alias ack='ack-grep'
alias ackt='ack-grep --text'
alias tz='tar -xzvf'
alias open='gnome-open'
alias tidyx='tidy -mi -xml -utf8'
alias xclip='xclip -selection c'

alias want='~/.config/repository/script/want.sh'
alias bm='~/.config/repository/script/bookmark.sh'
alias nbm='wc -l ~/Dropbox/Docs/links'
alias vbm='vim ~/Dropbox/Docs/links'

alias hm='cd ~/'

. ~/.config/dotfiles/nd

function ss {
  if [ -f script/server ]; then
    script/server $@
  else
   rails server $@
  fi
}
function sc {
  if [ -f script/console ]; then
    script/console $@
  else
    rails console $@
  fi
}
function sg {
  if [ -e script/generate ]; then
    script/generate $@
  else
    rails generate $@
  fi
}
alias ssr='ss -e dev_remote'
alias ssd='ruby script/server --debugger'
alias console='ruby script/console'
alias rreset='rake db:migrate:reset && rake db:fixtures:load && rake db:test:prepare && rake'
alias rebuild='rake db:drop db:create db:migrate db:fixtures:load db:test:prepare'

alias gst='git status'
alias ga='git add . && git status'
alias gd='git diff | vim'
alias gca='git commit -v -a'
alias gb='git branch'
alias gba='git branch -a'
alias gamd='git commit -a --amend'
alias gl='git log --pretty=oneline --abbrev-commit -6'
alias glf='git log --pretty=oneline --abbrev-commit'
alias gpr='git pull --rebase'
alias grc='git rebase --continue'

alias gsd='git svn dcommit --username dbrubak1'
alias gsf='git svn fetch'
alias gsr='git svn rebase'

alias t="$SCRIPT_HOME/todo.sh -d $SCRIPT_HOME/todo.cfg"
alias ta="$SCRIPT_HOME/todo.sh -d $SCRIPT_HOME/todo.cfg add"
alias tp="$SCRIPT_HOME/todo.sh -d $SCRIPT_HOME/todo.cfg projectview"

function parse_git_branch() {
  git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/(git::\1)/'
}
function parse_svn_branch() {
  parse_svn_url | sed -e 's#^'"$(parse_svn_repository_root)"'##g' | awk -F / '{print "(svn::"$1 "/" $2 ")"}'
}
function parse_svn_url() {
  svn info 2>/dev/null | grep -e '^URL*' | sed -e 's#^URL: *\(.*\)#\1#g '
}
function parse_svn_repository_root() {
  svn info 2>/dev/null | grep -e '^Repository Root:*' | sed -e 's#^Repository Root: *\(.*\)#\1\/#g '
}
function parse_scm_branch() {
  local value=$(parse_git_branch) 
  if [ -z "$value" ]; then
    local value=$(parse_svn_branch)
  fi
  echo "$value"
}

export PS1="\[\033[00m\]\u@\h\[\033[01;34m\] \w \[\033[31m\]\$(parse_scm_branch) \[\033[00m\]$\[\033[00m\] "

# rvm initializer
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"

# quick hack to load rvmrc if a new tab is opened in a folder containing a local rvmrc
if [ -e .rvmrc ]; then
  source .rvmrc
fi
